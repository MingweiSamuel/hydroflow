<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Hydroflow’s Surface API."><meta name="keywords" content="rust, rustlang, rust-lang, builder"><title>hydroflow::builder - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../hydroflow/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../hydroflow/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Module builder</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></div></section><div id="sidebar-vars" data-name="builder" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../hydroflow/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Module <a href="../index.html">hydroflow</a>::<wbr><a class="mod" href="#">builder</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/hydroflow/builder/mod.rs.html#1-285">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Hydroflow’s Surface API.</p>
<h3 id="internal-documentation"><a href="#internal-documentation">Internal Documentation</a></h3>
<p>Due to the limitations of type-level programming in Rust, this code is
“baklava” code containing lot of layers. Each layer does one thing, then
constructs the next layer(s) down. This table describes what each layer
does and is named. Layers are listed starting from the highest
(user-facing API) layer and ending with the lowest (code-running) layer.</p>
<h4 id="layer-structure"><a href="#layer-structure">Layer Structure</a></h4><div class="example-wrap"><pre class="language-text"><code>              (A) Surface API
        (B) (Push Surface Reversed*)
                     |
           (D) Subgraph Builder
                     |
          (E) Iterator/Pusherator</code></pre></div>
<p><sup>*Only used with <code>Push</code> to reverse the ownership direction.</sup></p>
<p>(Note (C) used to be <code>Connectors</code> but they’re no longer needed)</p>
<h4 id="layer-descriptions"><a href="#layer-descriptions">Layer Descriptions</a></h4><table>
<tr>
    <th rowspan="2">Layer</th>
    <th rowspan="2">Purpose</th>
    <th colspan="2">Naming</th>
</tr>
<tr>
   <th>Pull</th>
   <th>Push</th>
</tr>
<tr>
    <td>(A) The Surface API</td>
    <td rowspan="2">
        &bull; Presents a clean functional-chaining API for users.<br>
        &bull; Consumed to simultaneously create a (C) connector and (D) builder.<br>
        &bull; <strong>Push Only</strong>: Extra layer needed to reverse ownership order.
    </td>
    <td><code>PullSurface</code></td>
    <td><code>PushSurface</code></td>
</tr>
<tr>
    <td>(B) Push Surface Reversed</td>
    <td>N/A</td>
    <td><code>PushSurfaceReversed</code></td>
</tr>
<tr>
    <td>(D) Subgraph Builders</td>
    <td>
        &bull; On each subgraph invocation, constructs the (E) iterators and pivot which will be run.<br>
        &bull; Is owned by the subgraph task, lends closures to (E) iterators.<br>
        &bull; Uses the input/output <code>HandoffList</code> variadic type.
    </td>
    <td><code>PullBuild</code></td>
    <td><code>PushBuild</code></td>
</tr>
<tr>
    <td>(E) Iterators</td>
    <td>
        &bull; Runs code on individual dataflow elements, in the case of dataflow.<br>
        &bull; In the future, will correspond to semilattice morphisms alternatively.
    </td>
    <td><code>std::iter::Iterator</code></td>
    <td><code>crate::compiled::Pusherator</code></td>
</tr>
</table>
<h4 id="how-the-code-actually-runs"><a href="#how-the-code-actually-runs">How the code actually runs</a></h4>
<p>The layers are used in <a href="prelude/struct.HydroflowBuilder.html#method.add_subgraph" title="HydroflowBuilder::add_subgraph">HydroflowBuilder::add_subgraph</a>. The method
receives a pivot with <code>PullSurface</code> and <code>PushSurfaceReversed</code> halves. Then
<code>into_parts()</code> splits them into the ports half and the build half. Those
are then both sent to <a href="../scheduled/graph/struct.Hydroflow.html#method.add_subgraph">Hydroflow::add_subgraph()</a>
to create a subgraph.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="build/index.html" title="hydroflow::builder::build mod">build</a></div><div class="item-right docblock-short"><p>Internal “subgraph builders” to implement the Surface API. For more info see <a href="index.html" title="super">super</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="prelude/index.html" title="hydroflow::builder::prelude mod">prelude</a></div><div class="item-right docblock-short"><p>Prelude to quick-import items needed for using the Surface API.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="surface/index.html" title="hydroflow::builder::surface mod">surface</a></div><div class="item-right docblock-short"><p>Structs used to create the user-facing Surface API.</p>
</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.HydroflowBuilder.html" title="hydroflow::builder::HydroflowBuilder struct">HydroflowBuilder</a></div><div class="item-right docblock-short"><p>The user-facing entry point for the Surface API.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.IntoHydroflow.html" title="hydroflow::builder::IntoHydroflow trait">IntoHydroflow</a></div><div class="item-right docblock-short"><p>A trait to convert <a href="https://doc.rust-lang.org/nightly/core/iter/traits/collect/trait.IntoIterator.html" title="IntoIterator"><code>IntoIterator</code></a>s for use with Hydroflow’s surface (build) API.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="hydroflow" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0-nightly (63b8f01bb 2022-03-24)" ></div>
</body></html>